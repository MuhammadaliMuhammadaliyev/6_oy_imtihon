{% extends "base.html" %}
{% load i18n %}
{% block title %}{% trans "Hisoblar" %}{% endblock %}

{% block content %}
<div class="grid">
  <div class="card">
    <div class="row" style="justify-content:space-between">
      <div>
        <div class="h1">{% trans "Hisoblar" %}</div>
        <div class="muted">{% trans "Naqd va karta hisoblarini boshqarish" %}</div>
      </div>

      <a class="btn primary" href="{% url 'finance:account_create' %}">+ {% trans "Hisob qo‘shish" %}</a>
    </div>

    <div class="hr"></div>

    <div class="table-wrap">
      <table>
        <tr>
          <th>{% trans "Hisob" %}</th>
          <th>{% trans "Amal" %}</th>
        </tr>

        {% for a in accounts %}
        <tr>
          <td>
            <span class="badge">
              {{ a.get_type_display }}
              {% if a.type == "CARD" %}
                ({{ a.get_card_kind_display }} • {{ a.get_currency_display }})
              {% elif a.type == "CASH" or a.type == "CURR" %}
                ({{ a.get_currency_display }})
              {% endif %}
            </span>
          </td>

          <td class="row">
            <a class="btn" href="{% url 'finance:account_update' a.id %}">{% trans "Tahrirlash" %}</a>

            <form method="post" action="{% url 'finance:account_delete' a.id %}">
              {% csrf_token %}
              <button class="btn danger" type="submit">{% trans "O‘chirish" %}</button>
            </form>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="2" class="muted">{% trans "Hali hisob yo‘q." %}</td>
        </tr>
        {% endfor %}
      </table>
    </div>

    <div class="hr"></div>
    <a class="btn ghost" href="{% url 'finance:dashboard' %}">← {% trans "Dashboard" %}</a>
  </div>
</div>
{% endblock %}
